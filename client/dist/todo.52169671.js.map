{"version":3,"sources":["js/todo.js"],"names":["fetchMyTodos","$","empty","ajax","url","method","headers","accesstoken","localStorage","getItem","done","todos","console","log","options","weekday","month","day","rawPro","rawAll","rawCom","rawIn","forEach","todo","status","_id","name","description","Date","due_date","toLocaleDateString","append","fail","jqXHR","textstatus","swal","responseJSON","message","addTodo","val","data","response","fetchMyProjects","updateTodo","id","event","preventDefault","updateStatus","editTodo","setItem","modal","today","calendar","type","minDate","getFullYear","getMonth","getDate","deleteTodo","title","text","icon","buttons","dangerMode","then","willDelete"],"mappings":"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","file":"todo.52169671.js","sourceRoot":"..","sourcesContent":["function fetchMyTodos() {\n    $('#mytodos-incomplete').empty();\n    $('#mytodos-complete').empty();\n    $('#mytodos-all').empty();\n    $('#project-list').empty();\n\n    $\n        .ajax({\n            url: 'http://localhost:3000/todos/',\n            method: 'GET',\n            headers: {\n                accesstoken: localStorage.getItem('accesstoken')\n            }\n        })\n        .done(todos => {\n            console.log(todos)\n            const options = { weekday: 'short', month: 'long', day: 'numeric' };\n\n            let rawPro = ``;\n            let rawAll = ``;\n            let rawCom = ``;\n            let rawIn = ``;\n\n            todos.forEach(todo => {\n                if (todo.status) {\n                    rawCom += `\n                    <div class=\"four wide column\">\n                    <div class=\"ui link card animated flipInX\">\n                    <div class=\"content\">\n                    <i class=\"right floated check large green icon\" onclick=\"updateStatus('${todo._id}', ${!todo.status})\"></i>\n                    <div class=\"header\">${todo.name}</div>\n                        <div class=\"description\">\n                            <p>${todo.description}</p>\n                        </div>\n                    </div>\n                    <div class=\"extra content\">\n                        <span class=\"left floated trash\" onclick=\"deleteTodo('${todo._id}')\">\n                            <i class=\"trash icon\"></i>\n                        </span>\n                        <span class=\"left floated trash\" onclick=\"editTodo('${todo._id}')\">\n                            <i class=\"edit icon\"></i>\n                        </span>\n\n                        <span class=\"right floated clock outline\">\n                        <i class=\"clock_outline icon\"></i>\n                        Due date: ${new Date(todo.due_date).toLocaleDateString('en', options)}\n                        </span>\n                        </div>\n                        </div>\n                    </div>\n                    `\n                } else {\n                    rawIn += `\n                    <div class=\"four wide column\">\n                    <div class=\"ui link card animated flipInX\">\n                    <div class=\"content\">\n                    <i class=\"right floated check large grey icon\" onclick=\"updateStatus('${todo._id}', ${!todo.status})\"></i>\n                    <div class=\"header\">${todo.name}</div>\n                        <div class=\"description\">\n                            <p>${todo.description}</p>\n                        </div>\n                    </div>\n                    <div class=\"extra content\">\n                        <span class=\"left floated trash\" onclick=\"deleteTodo('${todo._id}')\">\n                            <i class=\"trash icon\"></i>\n                        </span>\n\n                        <span class=\"left floated trash\" onclick=\"editTodo('${todo._id}')\">\n                            <i class=\"edit icon\"></i>\n                        </span>\n                        <span class=\"right floated clock outline\">\n                        <i class=\"clock_outline icon\"></i>\n                        Due date: ${new Date(todo.due_date).toLocaleDateString('en', options)}\n                        </span>\n                        </div>\n                    </div>\n                    </div>\n                    `\n                }\n                rawAll += `\n                <div class=\"four wide column\">\n                    <div class=\"ui link card animated flipInX\">\n                    <div class=\"content\">\n                    <i class=\"right floated check large ${todo.status ? \"green\" : \"grey\"} icon\" onclick=\"updateStatus('${todo._id}', ${!todo.status})\"></i>\n                    <div class=\"header\">${todo.name}</div>\n                        <div class=\"description\">\n                            <p>${todo.description}</p>\n                        </div>\n                    </div>\n                    <div class=\"extra content\">\n                        <span class=\"left floated trash\" onclick=\"deleteTodo('${todo._id}')\">\n                            <i class=\"trash icon\"></i>\n                        </span>\n\n                        <span class=\"left floated trash\" onclick=\"editTodo('${todo._id}')\">\n                            <i class=\"edit icon\"></i>\n                        </span>\n                        <span class=\"right floated clock outline\">\n                        <i class=\"clock_outline icon\"></i>\n                        Due date: ${new Date(todo.due_date).toLocaleDateString('en', options)}\n                        </span>\n                        </div>\n                    </div>\n                </div>\n                `\n            })\n\n            $('#mytodos-all').append(rawAll)\n            $('#mytodos-incomplete').append(rawIn)\n            $('#mytodos-complete').append(rawCom)\n        })\n        .fail((jqXHR, textstatus) => {\n            swal(jqXHR.responseJSON.message)\n        })\n}\n\nfunction addTodo() {\n\n    const name = $('#new-todo-name').val()\n    const description = $('#new-todo-desc').val() || null\n    const due_date = $('#new-todo-due-date').val() || null\n\n    console.log(name, description, due_date)\n    $\n        .ajax({\n            url: 'http://localhost:3000/todos/',\n            method: 'POST',\n            headers: {\n                accesstoken: localStorage.getItem('accesstoken')\n            },\n            data: {\n                name, description, due_date\n            }\n        })\n        .done(response => {\n            fetchMyTodos()\n            fetchMyProjects()\n\n        })\n        .fail((jqXHR, textstatus) => {\n            swal(jqXHR.responseJSON.message)\n        })\n}\n\nfunction updateTodo(id) {\n\n    const name = $('#edit-todo-name').val()\n    const description = $('#edit-todo-desc').val() || null\n    const due_date = $('#edit-todo-due-date').val() || null\n    \n    event.preventDefault()\n\n    $\n        .ajax({\n            url: `http://localhost:3000/todos/${id}`,\n            method: 'PATCH',\n            headers: {\n                accesstoken: localStorage.getItem('accesstoken')\n            },\n            data : {\n                name, description, due_date\n            }\n        })\n        .done(response => {\n            fetchMyTodos()\n            fetchMyProjects()\n\n        })\n        .fail((jqXHR, textstatus) => {\n            swal(jqXHR.responseJSON.message)\n        })\n}\n\nfunction updateStatus(id, status){\n    event.preventDefault();\n\n    $\n        .ajax({\n            url: `http://localhost:3000/todos/${id}`,\n            method: 'PATCH',\n            headers: {\n                accesstoken: localStorage.getItem('accesstoken')\n            },\n            data: {\n                status: status\n            }\n        })\n        .done(response => {\n            fetchMyTodos();\n            fetchMyProjects();\n\n        })\n        .fail((jqXHR, textstatus) => {\n            swal(jqXHR.responseJSON.message)\n        })\n}\n\nfunction editTodo(id) {\n    console.log('masuk edit')\n    $\n        .ajax({\n            url: `http://localhost:3000/todos/${id}`,\n            method: 'GET',\n            headers: {\n                accesstoken: localStorage.getItem('accesstoken')\n            }\n        })\n        .done(response => {\n            localStorage.setItem('idTodo', id)\n            $('#edit-form').modal('show')\n            console.log(response)\n            const today = new Date\n\n            $('#edit-todo-name').val(response.name)\n            $('#edit-todo-desc').val(response.description)\n            $('#date_calendar_edit').calendar({\n                type: 'date',\n                minDate: new Date(today.getFullYear(), today.getMonth(), today.getDate()),\n            })\n        })\n        .fail((jqXHR, textstatus) => {\n            swal(jqXHR.responseJSON.message)\n        })\n}\n\nfunction deleteTodo(id) {\n    swal({\n        title: \"Are you sure?\",\n        text: \"Once deleted, you will not be able to recover this!\",\n        icon: \"warning\",\n        buttons: true,\n        dangerMode: true,\n    })\n        .then((willDelete) => {\n            if (willDelete) {\n                $\n                    .ajax({\n                        url: `http://localhost:3000/todos/${id}`,\n                        method: 'delete',\n                        headers: {\n                            accesstoken: localStorage.getItem('accesstoken')\n                        }\n                    })\n                    .done(response => {\n                        fetchMyTodos()\n                        fetchMyProjects()\n\n                        swal(\"Todo deleted!\", {\n                            icon: \"success\",\n                        })\n                    })\n                    .fail((jqXHR, textstatus) => {\n                        swal(jqXHR.responseJSON.message)\n                    })\n            }\n        })\n}"]}